# TestPilot â€” æµ‹è¯•ä¸“ç²¾ AI Agent æŠ€æœ¯è®¾è®¡æ–‡æ¡£

> ä¸€ä¸ªç‹¬ç«‹çš„ã€å…¨è‡ªåŠ¨çš„æµ‹è¯• Agentã€‚ç”¨æˆ·ä¸€å¥è¯æè¿°è¦æµ‹ä»€ä¹ˆï¼ŒAgent è‡ªä¸»æ¢ç´¢é¡¹ç›®ã€ç†è§£ä»£ç ã€ç”Ÿæˆæµ‹è¯•ã€æ‰§è¡Œå¹¶è¾“å‡ºæŠ¥å‘Šã€‚

---

## ä¸€ã€é¡¹ç›®å®šä½

### 1.1 ä¸€å¥è¯å®šä¹‰

TestPilot æ˜¯ä¸€ä¸ª**æµ‹è¯•é¢†åŸŸä¸“ç²¾**çš„è‡ªä¸» AI Agentï¼Œç±»ä¼¼ OpenClaw çš„æ¶æ„ç†å¿µï¼Œä½†å‚ç›´èšç„¦äºè½¯ä»¶æµ‹è¯•ã€‚

### 1.2 ä¸ç°æœ‰äº§å“çš„å®šä½å·®å¼‚

```
OpenClaw   = é€šç”¨ä¸ªäºº AI åŠ©æ‰‹ï¼ˆä»€ä¹ˆéƒ½èƒ½åšï¼Œä»€ä¹ˆéƒ½ä¸ç²¾ï¼‰
Tusk/Qodo  = CI/CD ç®¡çº¿ä¸­çš„æµ‹è¯•æ’ä»¶ï¼ˆéœ€è¦ PR è§¦å‘ï¼Œç»‘å®šå¹³å°ï¼‰
testRigor  = è‡ªç„¶è¯­è¨€ E2E æµ‹è¯•ï¼ˆäººå†™æ­¥éª¤ï¼Œæœºå™¨æ‰§è¡Œï¼‰
TestPilot  = ç‹¬ç«‹çš„æµ‹è¯•ä¸“å®¶ Agentï¼ˆä¸€å¥è¯é©±åŠ¨ï¼Œè‡ªä¸»å®Œæˆå…¨æµç¨‹ï¼‰
```

### 1.3 æ ¸å¿ƒå·®å¼‚ç‚¹

| ç»´åº¦ | Tusk / Qodo / Keploy | TestPilot |
|------|----------------------|-----------|
| è§¦å‘æ–¹å¼ | PR/commit/æµé‡å½•åˆ¶ | ä¸€å¥è‡ªç„¶è¯­è¨€ |
| è¾“å…¥ | ä»£ç  diff / API æµé‡ | åŠŸèƒ½æè¿° + é¡¹ç›®è·¯å¾„ |
| å®šä½èƒ½åŠ› | äººæŒ‡å®šæ–‡ä»¶ | Agent è‡ªä¸»æ¢ç´¢å®šä½ |
| çŸ¥è¯†ç§¯ç´¯ | æ—  | Feature Doc æŒä¹…åŒ– |
| å¹³å°ç»‘å®š | GitHub CI/CD | ç‹¬ç«‹è¿è¡Œï¼Œæ— ä¾èµ– |
| æ‰©å±•æ–¹å¼ | æ”¹ä»£ç  | å†™ SKILL.md |

---

## äºŒã€æ•´ä½“æ¶æ„

### 2.1 é¡¶å±‚æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TestPilot                               â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      Interface Layer                      â”‚  â”‚
â”‚  â”‚         CLI    â”‚    Web UI    â”‚    SDK/API    â”‚   MCP      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Controller Layer                        â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Session â”‚  â”‚  Event   â”‚  â”‚ State    â”‚  â”‚ Observer  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Manager â”‚  â”‚  Bus     â”‚  â”‚  Store   â”‚  â”‚ (Hooks)   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     Agent Layer                            â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚              Agent Loop (ReAct)                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚Think â”‚â”€â”€â–¶â”‚ Plan â”‚â”€â”€â–¶â”‚  Act    â”‚â”€â”€â–¶â”‚ Reflect  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚      â–²                                     â”‚        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Test Domain  â”‚  â”‚  Prompt      â”‚  â”‚  Memory        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ Knowledge    â”‚  â”‚  Registry    â”‚  â”‚  (Short+Long)  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      Tool Layer                            â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  é€šç”¨å·¥å…· (æ‰€æœ‰ Agent å…±ç”¨):                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚list_dir â”‚ â”‚read_fileâ”‚ â”‚write_fileâ”‚ â”‚search_files  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚  â”‚
â”‚  â”‚  â”‚run_commandâ”‚                                            â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Runtime Layer                           â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚    Sandbox        â”‚  â”‚     LLM Backend              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  Docker / ç›´æ¥æ‰§è¡Œâ”‚  â”‚  Claude / OpenAI / Ollama    â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒè®¾è®¡åŸåˆ™

**Tool / Skill åˆ†ç¦»**ï¼ˆå€Ÿé‰´ OpenClawï¼‰

```
Tool = èƒ½åŠ› (Capability)
  å¯æ‰§è¡Œçš„å‡½æ•°, æœ‰ JSON Schema, Agent é€šè¿‡ tool_use è°ƒç”¨
  ä¾‹: read_file, run_command
  â†’ Agent çš„ "æ‰‹"

Skill = çŸ¥è¯† (Knowledge)
  SKILL.md æ–‡ä»¶, çº¯ Markdown + YAML frontmatter
  æŒ‰éœ€æ³¨å…¥åˆ° system prompt
  ä¸æ˜¯ä»£ç , æ˜¯ "æ€ä¹ˆç”¨å·¥å…·å®ŒæˆæŸä¸ªé¢†åŸŸä»»åŠ¡" çš„æŒ‡ä»¤
  â†’ Agent çš„ "è„‘"
```

è¿™ä¸ªåˆ†ç¦»å¸¦æ¥çš„å¥½å¤„ï¼š
- Tool é€šç”¨ä¸”ç¨³å®šï¼Œå¾ˆå°‘æ”¹åŠ¨
- Skill é¢†åŸŸä¸“ç²¾ï¼Œé€šè¿‡å†™ Markdown æ‰©å±•ï¼Œä¸éœ€è¦æ”¹ä»£ç 
- ç”¨æˆ·å¯ä»¥åœ¨é¡¹ç›®ç›®å½•è‡ªå®šä¹‰ Skillï¼Œè¦†ç›–é»˜è®¤è¡Œä¸º
- ç¤¾åŒºå¯ä»¥è´¡çŒ® Skillï¼Œé—¨æ§›æä½

---

## ä¸‰ã€æ ¸å¿ƒæµç¨‹

### 3.1 ç«¯åˆ°ç«¯æµç¨‹

```
ç”¨æˆ·: "å¸®æˆ‘æµ‹è¯•ç™»å½•æ˜¯å¦æ­£å¸¸"
              â”‚
              â–¼
â”Œâ”€ Phase 1: Explore â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚  æ£€æŸ¥ .testpilot/features/ æ˜¯å¦å·²æœ‰æ–‡æ¡£          â”‚
â”‚  â”œâ”€ æœ‰ â†’ ç›´æ¥è¯»å–, è·³åˆ° Phase 3                 â”‚
â”‚  â””â”€ æ—  â†’ ç»§ç»­æ¢ç´¢                               â”‚
â”‚                                                  â”‚
â”‚  list_dir(".") æŸ¥çœ‹é¡¹ç›®ç»“æ„                      â”‚
â”‚  è¯»å– package.json / pom.xml ç­‰ç¡®å®šæŠ€æœ¯æ ˆ        â”‚
â”‚  search_files æœç´¢ "login" ç›¸å…³ä»£ç               â”‚
â”‚  read_file é€ä¸ªé˜…è¯»ç›¸å…³æºç                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€ Phase 2: ç”Ÿæˆ Feature Doc â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚  å°†æ¢ç´¢ç»“æœç»“æ„åŒ–å†™å…¥:                           â”‚
â”‚  .testpilot/features/login.md                    â”‚
â”‚                                                  â”‚
â”‚  å†…å®¹:                                           â”‚
â”‚  - æŠ€æœ¯æ ˆä¿¡æ¯                                    â”‚
â”‚  - å®ç°æ–‡ä»¶åˆ—è¡¨ + å‡½æ•°ç­¾å                      â”‚
â”‚  - æ ¸å¿ƒä¸šåŠ¡æµç¨‹                                  â”‚
â”‚  - å¤–éƒ¨ä¾èµ– (æ•°æ®åº“/ç¬¬ä¸‰æ–¹APIç­‰)                â”‚
â”‚  - æµ‹è¯•ç­–ç•¥å»ºè®® (mock ä»€ä¹ˆ, æµ‹ä»€ä¹ˆ)             â”‚
â”‚                                                  â”‚
â”‚  é¦–æ¬¡ç”Ÿæˆ, åç»­å¤ç”¨                              â”‚
â”‚  ç”¨æˆ·å¯æ‰‹åŠ¨ç¼–è¾‘ä¿®æ­£                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€ Phase 3: è¯»å–æºç  + æµ‹è¯•æ•°æ® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚  æŒ‰ Feature Doc ä¸­çš„æ–‡ä»¶åˆ—è¡¨è¯»å–æºç              â”‚
â”‚  æ£€æŸ¥é¡¹ç›®ä¸­æ˜¯å¦æœ‰å¯ç”¨çš„æµ‹è¯•æ•°æ®:                 â”‚
â”‚  - test/fixtures/ æˆ– tests/data/                 â”‚
â”‚  - seed æ•°æ®æ–‡ä»¶                                 â”‚
â”‚  - .env.test æˆ– .env.example                     â”‚
â”‚  ä¼˜å…ˆä½¿ç”¨é¡¹ç›®è‡ªå¸¦çš„æ•°æ®,è€Œéå‡­ç©ºç¼–é€              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€ Phase 4: æ‰¹é‡ç”Ÿæˆæµ‹è¯• â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚  ä¸€æ¬¡ç”Ÿæˆ 5-8 ä¸ªæµ‹è¯•å‡½æ•°                         â”‚
â”‚  è¦†ç›–: æ­£å‘ / åå‘ / è¾¹ç•Œ / å¼‚å¸¸                â”‚
â”‚  å†™å…¥æµ‹è¯•æ–‡ä»¶                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€ Phase 5: æ‰§è¡Œ + è¿‡æ»¤ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚  æ‰§è¡Œå…¨éƒ¨æµ‹è¯• (å¸¦è¦†ç›–ç‡å‚æ•°)                     â”‚
â”‚                                                  â”‚
â”‚  è¿‡æ»¤ç®¡çº¿ (å€Ÿé‰´ Qodo/Meta TestGen-LLM):         â”‚
â”‚  â”œâ”€ è¯­æ³•é”™è¯¯/è·‘ä¸é€š â†’ ä¿®å¤åé‡è¯• (æœ€å¤š3æ¬¡)      â”‚
â”‚  â”œâ”€ è·‘é€šä½†æ–­è¨€æ— æ„ä¹‰ â†’ ä¸¢å¼ƒé‡å†™                 â”‚
â”‚  â”œâ”€ è·‘é€šä¸”æœ‰æ„ä¹‰ â†’ ä¿ç•™                         â”‚
â”‚  â””â”€ æ–­è¨€å¤±è´¥ â†’ åˆ¤æ–­æ˜¯æµ‹è¯•é—®é¢˜è¿˜æ˜¯æºç  bug       â”‚
â”‚     â”œâ”€ æµ‹è¯•é—®é¢˜ â†’ ä¿®å¤é‡è¯•                      â”‚
â”‚     â””â”€ æºç  bug â†’ è®°å½•åˆ°æŠ¥å‘Š                    â”‚
â”‚                                                  â”‚
â”‚  è¦†ç›–ç‡æ£€æŸ¥:                                     â”‚
â”‚  â”œâ”€ å…³é”®å‡½æ•°è¦†ç›–ç‡ >= 80% â†’ è¿›å…¥æŠ¥å‘Šé˜¶æ®µ        â”‚
â”‚  â””â”€ ä¸è¶³ â†’ åˆ†ææœªè¦†ç›–åˆ†æ”¯, è¡¥å……æµ‹è¯•, é‡æ–°æ‰§è¡Œ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€ Phase 6: æµ‹è¯•æŠ¥å‘Š â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚  # æµ‹è¯•æŠ¥å‘Š: ç”¨æˆ·ç™»å½•                           â”‚
â”‚  ## æ¦‚è§ˆ                                        â”‚
â”‚  - é¡¹ç›®: music-app                              â”‚
â”‚  - æŠ€æœ¯æ ˆ: Python + FastAPI                     â”‚
â”‚  - æµ‹è¯•æ–‡ä»¶: test_login.py                      â”‚
â”‚  ## ç»“æœ                                        â”‚
â”‚  - âœ… é€šè¿‡: 5 ä¸ª                                â”‚
â”‚  - âŒ å¤±è´¥: 1 ä¸ª                                â”‚
â”‚  ## è¯¦ç»†ç»“æœ                                    â”‚
â”‚  ### âœ… test_login_success â€” æ­£å¸¸ç™»å½•           â”‚
â”‚  ### âŒ test_login_network_error â€” ç½‘ç»œå¼‚å¸¸     â”‚
â”‚  ## å‘ç°çš„é—®é¢˜                                  â”‚
â”‚  - src/auth/service.py:45 ç¼ºå°‘ç½‘ç»œå¼‚å¸¸å¤„ç†      â”‚
â”‚                                                  â”‚
â”‚  åŒæ—¶æ›´æ–° Feature Doc (è¿½åŠ æµ‹è¯•å†å²)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 é¦–æ¬¡ vs éé¦–æ¬¡è¿è¡Œå¯¹æ¯”

```
é¦–æ¬¡è¿è¡Œ                            éé¦–æ¬¡è¿è¡Œ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
explore é¡¹ç›® (5-10è½®å·¥å…·è°ƒç”¨)       è¯» Feature Doc (1è½®)
ç”Ÿæˆ Feature Doc                    è·³è¿‡
è¯»æºç                               è¯»æºç  (æŒ‰æ–‡æ¡£ä¸­çš„æ–‡ä»¶åˆ—è¡¨)
ç”Ÿæˆæµ‹è¯•                            ç”Ÿæˆæµ‹è¯•
æ‰§è¡Œ + è¿‡æ»¤                         æ‰§è¡Œ + è¿‡æ»¤
è¾“å‡ºæŠ¥å‘Š                            è¾“å‡ºæŠ¥å‘Š (å¯ä¸ä¸Šæ¬¡å¯¹æ¯”)

Token æ¶ˆè€—: é«˜                      Token æ¶ˆè€—: ä½
è€—æ—¶: é•¿                            è€—æ—¶: çŸ­
```

---

## å››ã€Feature Doc è®¾è®¡

### 4.1 Feature Doc æ˜¯ä»€ä¹ˆ

Agent å¯¹é¡¹ç›®æŸä¸ªåŠŸèƒ½çš„ç†è§£ç¼“å­˜ï¼Œä»¥ Markdown æ–‡ä»¶æŒä¹…åŒ–å­˜å‚¨åœ¨é¡¹ç›®çš„ `.testpilot/features/` ç›®å½•ä¸­ã€‚

**æœ¬è´¨: Agent çš„é•¿æœŸè®°å¿†ï¼Œä¹Ÿæ˜¯äººæœºåä½œæ¥å£ã€‚**

### 4.2 æ–‡ä»¶æ ¼å¼

```markdown
# åŠŸèƒ½: ç”¨æˆ·ç™»å½•
> ç”Ÿæˆæ—¶é—´: 2026-02-14
> æœ€è¿‘æµ‹è¯•: 2026-02-14
> æœ€è¿‘ç»“æœ: 5/6 é€šè¿‡

## æŠ€æœ¯æ ˆ
- è¯­è¨€: Python 3.11
- æ¡†æ¶: FastAPI
- æµ‹è¯•æ¡†æ¶: pytest
- æ•°æ®åº“: PostgreSQL + SQLAlchemy

## å®ç°æ–‡ä»¶
- src/auth/router.py        â€” POST /api/login è·¯ç”±å…¥å£
- src/auth/service.py       â€” login() æ ¸å¿ƒé€»è¾‘
- src/auth/dependencies.py  â€” JWT token ç”Ÿæˆ/éªŒè¯
- src/models/user.py        â€” User ORM æ¨¡å‹

## æ ¸å¿ƒæµç¨‹
1. æ¥æ”¶ username + password
2. æŸ¥æ•°æ®åº“éªŒè¯ç”¨æˆ·æ˜¯å¦å­˜åœ¨
3. å¯†ç ç”¨ bcrypt æ¯”å¯¹
4. æˆåŠŸåˆ™ç­¾å‘ JWT token
5. å¤±è´¥è¿”å› 401

## å¤–éƒ¨ä¾èµ–
- PostgreSQL (ç”¨æˆ·è¡¨) â€” éœ€è¦ mock
- bcrypt (å¯†ç å“ˆå¸Œ) â€” ä¸ mock, è¿™æ˜¯æ ¸å¿ƒé€»è¾‘
- python-jose (JWT) â€” ä¸ mock

## å·²æœ‰æµ‹è¯•æ•°æ®
- tests/fixtures/users.json â€” æµ‹è¯•ç”¨æˆ·æ•°æ®
- .env.test â€” æµ‹è¯•ç¯å¢ƒé…ç½®

## æµ‹è¯•ç­–ç•¥
- æ­£å‘: æ­£ç¡®ç”¨æˆ·åå¯†ç ç™»å½•æˆåŠŸ
- åå‘: å¯†ç é”™è¯¯ã€ç”¨æˆ·ä¸å­˜åœ¨
- è¾¹ç•Œ: ç©ºå­—ç¬¦ä¸²ã€è¶…é•¿è¾“å…¥ã€SQLæ³¨å…¥å°è¯•
- å¼‚å¸¸: æ•°æ®åº“è¿æ¥å¤±è´¥ã€JWTç­¾å‘å¼‚å¸¸

## æµ‹è¯•å†å²
- 2026-02-14: 5/6 é€šè¿‡, test_network_error å¤±è´¥
```

### 4.3 Feature Doc åŒ¹é…ç­–ç•¥

ç”¨æˆ·è¯´ "æµ‹è¯•ç™»å½•"ï¼ŒAgent æ€ä¹ˆæ‰¾åˆ°å¯¹åº”çš„ Feature Doc:

```
ç¬¬ä¸€ç‰ˆ (MVP): æ–‡ä»¶ååŒ¹é…
  list_dir(".testpilot/features/")
  â†’ login.md, payment.md, upload.md
  â†’ LLM åˆ¤æ–­ "ç™»å½•" å¯¹åº” login.md

åç»­æ¼”è¿›: ç´¢å¼•æ–‡ä»¶
  .testpilot/features/index.md
  åˆ—å‡ºæ¯ä¸ª feature doc çš„åç§°å’Œæ‘˜è¦
  Agent è¯» index å®šä½, é¡¹ç›®å¾ˆå¤§æ—¶æ›´é«˜æ•ˆ
```

---

## äº”ã€Agent Loop è®¾è®¡

### 5.1 æ ¸å¿ƒå¾ªç¯

ä¸éœ€è¦çŠ¶æ€æœºï¼Œä¸éœ€è¦äº‹ä»¶æ€»çº¿ã€‚ç›´æ¥åˆ©ç”¨ LLM çš„ tool use èƒ½åŠ›ï¼š

```
messages = [system_prompt + loaded_skills]
messages.append({ role: "user", content: "é¡¹ç›®è·¯å¾„: /xxx\nè¯·æµ‹è¯•: ç™»å½•" })

while turn < MAX_TURNS:

    response = llm.call(messages, tools)

    if response åŒ…å« tool_call:
        result = execute_tool(tool_call)
        messages.append(tool_call)
        messages.append(result)
        continue                        â† ç»§ç»­å¾ªç¯

    if response æ˜¯çº¯æ–‡æœ¬:
        print(response)                 â† æœ€ç»ˆæŠ¥å‘Š
        break                           â† ç»“æŸ

    if è¶…è¿‡ max_turns:
        break                           â† å®‰å…¨é˜€
```

**å…³é”®æ´å¯Ÿ: ä¸éœ€è¦è‡ªå·±å®ç° ReActã€‚** LLM çš„ tool use æœ¬èº«å°±æ˜¯ ReAct â€” LLM è‡ªå·±å†³å®šè°ƒå“ªä¸ªå·¥å…·ã€ä¼ ä»€ä¹ˆå‚æ•°ã€ä»€ä¹ˆæ—¶å€™åœã€‚ç¼–æ’é€»è¾‘å…¨åœ¨ SKILL.md çš„è‡ªç„¶è¯­è¨€æŒ‡ä»¤é‡Œï¼Œä¸åœ¨ä»£ç é‡Œã€‚

### 5.2 ä¸¤å±‚ LLM è°ƒç”¨çš„å–èˆ

```
æ–¹æ¡ˆ A: generate_test ä½œä¸ºç‹¬ç«‹å·¥å…·, å†…éƒ¨è°ƒ LLM
  Agent LLM â†’ tool_call("generate_test") â†’ å†…éƒ¨ LLM ç”Ÿæˆä»£ç 
  é—®é¢˜: ä¸¤å±‚ LLM, æˆæœ¬ç¿»å€, ä¸Šä¸‹æ–‡å‰²è£‚

æ–¹æ¡ˆ B: Agent LLM è‡ªå·±ç”Ÿæˆæµ‹è¯•ä»£ç  âœ“ (é‡‡ç”¨)
  Agent è¯»å®Œæºç å, è‡ªå·±å†™æµ‹è¯•ä»£ç , ç›´æ¥è°ƒ write_file
  å·¥å…·åªåš LLM åšä¸äº†çš„äº‹ (è®¿é—®æ–‡ä»¶ç³»ç»Ÿã€æ‰§è¡Œå‘½ä»¤)
  æ›´ç®€å•, ä¸Šä¸‹æ–‡å®Œæ•´, æˆæœ¬æ›´ä½
```

---

## å…­ã€Tool è®¾è®¡

### 6.1 å·¥å…·åˆ—è¡¨ (6 ä¸ªå·¥å…·)

| Tool | è¾“å…¥ | è¾“å‡º | ç”¨é€” |
|------|------|------|------|
| `list_dir` | path: str | æ–‡ä»¶/ç›®å½•åˆ—è¡¨ | æ¢ç´¢é¡¹ç›®ç»“æ„ |
| `read_file` | path: str | æ–‡ä»¶å†…å®¹ | è¯»æºç /æ–‡æ¡£/é…ç½® |
| `write_file` | path: str, content: str | success: bool | å†™ Feature Doc / æµ‹è¯•ä»£ç  |
| `search_files` | pattern: str, path: str | åŒ¹é…æ–‡ä»¶åˆ—è¡¨ + è¡Œå†…å®¹ | å…³é”®è¯å®šä½åŠŸèƒ½ä»£ç  |
| `run_command` | command: str, timeout: int | stdout, stderr, returncode | æ‰§è¡Œæµ‹è¯•å‘½ä»¤ |
| `ask_user` | questions: list, suggestion: str | ç”¨æˆ·å›ç­”æ–‡æœ¬ | èŒƒå›´ç¡®è®¤ã€éœ€æ±‚æ¾„æ¸… |

### 6.2 å·¥å…·æ³¨å†Œæœºåˆ¶

é‡‡ç”¨æ³¨å†Œè¡¨æ¨¡å¼ï¼Œæ”¯æŒåŠ¨æ€æ‰©å±•:

```python
# æ³¨å†Œ
register_tool(name, description, input_schema, handler)

# Agent è°ƒç”¨æ—¶
get_all_tools()     â†’ è¿”å›æ‰€æœ‰å·¥å…·çš„ schema (ä¼ ç»™ LLM)
execute_tool(name, params) â†’ æ‰§è¡Œå¹¶è¿”å›ç»“æœ
```

### 6.3 è®¾è®¡åŸåˆ™

- å·¥å…·åªåš LLM åšä¸äº†çš„äº‹ (IO æ“ä½œ)
- æµ‹è¯•ç”Ÿæˆã€è´¨é‡åˆ¤æ–­ã€æŠ¥å‘Šè¾“å‡ºç”± Agent LLM è‡ªå·±å®Œæˆ
- æ¯ä¸ªå·¥å…·æ¥å£ç®€å•ã€èŒè´£å•ä¸€
- æ–°å¢å·¥å…· = å†™ä¸€ä¸ªå‡½æ•° + æ³¨å†Œï¼Œä¸åŠ¨ä¸»å¾ªç¯

---

## ä¸ƒã€Skill è®¾è®¡

### 7.1 Skill æ˜¯ä»€ä¹ˆ

Skill æ˜¯ SKILL.md æ–‡ä»¶ï¼Œçº¯ Markdown + YAML frontmatterã€‚å®ƒä¸æ˜¯å¯æ‰§è¡Œä»£ç ï¼Œè€Œæ˜¯æ³¨å…¥åˆ° LLM system prompt ä¸­çš„é¢†åŸŸçŸ¥è¯†å’Œè¡Œä¸ºæŒ‡ä»¤ã€‚

### 7.2 SKILL.md æ ¼å¼

```yaml
---
name: testing-python
description: Python + pytest æµ‹è¯•ä¸“ç²¾æŠ€èƒ½
metadata:
  testpilot:
    emoji: "ğŸ"
    requires:
      bins: ["python3", "pytest"]
---

# Python æµ‹è¯•æŠ€èƒ½

## é€‚ç”¨åœºæ™¯
å½“æ£€æµ‹åˆ°é¡¹ç›®æ˜¯ Python é¡¹ç›®æ—¶åŠ è½½æ­¤æŠ€èƒ½

## å·¥ä½œæµç¨‹
1. æ”¶åˆ°æµ‹è¯•è¯·æ±‚å, å…ˆæ£€æŸ¥ .testpilot/features/ ç›®å½•
   - æœ‰åŒ¹é…çš„æ–‡æ¡£ â†’ è¯»å–, è·³åˆ°ç¬¬4æ­¥
   - æ²¡æœ‰ â†’ ç»§ç»­ç¬¬2æ­¥

2. Explore é¡¹ç›®:
   - list_dir çœ‹ç»“æ„
   - è¯» pyproject.toml / requirements.txt / setup.py ç¡®å®šä¾èµ–
   - search_files æœç´¢ä¸ç”¨æˆ·æè¿°ç›¸å…³çš„å…³é”®è¯

3. ç”Ÿæˆ Feature Doc:
   - æŒ‰å›ºå®šæ¨¡æ¿å†™å…¥ .testpilot/features/<åŠŸèƒ½å>.md
   - å¿…é¡»åŒ…å«: æ–‡ä»¶åˆ—è¡¨ã€æ ¸å¿ƒæµç¨‹ã€å¤–éƒ¨ä¾èµ–ã€æµ‹è¯•ç­–ç•¥

4. é˜…è¯»æºç  + æµ‹è¯•æ•°æ®:
   - æŒ‰ Feature Doc ä¸­çš„æ–‡ä»¶åˆ—è¡¨ read_file
   - æ£€æŸ¥ tests/fixtures/, tests/data/, conftest.py
   - ä¼˜å…ˆä½¿ç”¨é¡¹ç›®å·²æœ‰æ•°æ®, è€Œéè‡ªå·±ç¼–é€ 

5. æ‰¹é‡ç”Ÿæˆæµ‹è¯•:
   - ä¸€æ¬¡ç”Ÿæˆ 5-8 ä¸ªæµ‹è¯•å‡½æ•°
   - ä½¿ç”¨ pytest é£æ ¼
   - å‘½å: test_<è¡Œä¸º>_<æ¡ä»¶>_<é¢„æœŸç»“æœ>
   - Mock ç­–ç•¥: ç”¨ unittest.mock æˆ– pytest-mock
   - åª mock å¤–éƒ¨ IO (æ•°æ®åº“/ç½‘ç»œ/æ–‡ä»¶), ä¸ mock è¢«æµ‹é€»è¾‘

6. æ‰§è¡Œæµ‹è¯•:
   - run_command: pytest <test_file> -v --tb=short
   - å¦‚éœ€è¦†ç›–ç‡: pytest --cov=<module> --cov-report=term

7. è´¨é‡è¿‡æ»¤:
   - èƒ½è·‘é€š + æ–­è¨€æœ‰æ„ä¹‰ â†’ ä¿ç•™
   - è·‘ä¸é€š â†’ ä¿®å¤åé‡è¯• (æœ€å¤š3æ¬¡)
   - æ–­è¨€æ— æ„ä¹‰ (å¦‚ assert True) â†’ åˆ é™¤é‡å†™
   - æ–­è¨€å¤±è´¥ â†’ åˆ¤æ–­æ˜¯æµ‹è¯•é—®é¢˜è¿˜æ˜¯æºç  bug

8. è¦†ç›–ç‡æ£€æŸ¥:
   - å…³é”®å‡½æ•°è¦†ç›–ç‡ < 80% â†’ åˆ†ææœªè¦†ç›–åˆ†æ”¯, è¡¥å……æµ‹è¯•
   - è¾¾æ ‡ â†’ è¿›å…¥æŠ¥å‘Šé˜¶æ®µ

9. è¾“å‡ºæµ‹è¯•æŠ¥å‘Š (Markdown æ ¼å¼)
```

### 7.3 Skill åŠ è½½ä¸å‘ç°

```
åŠ è½½ä¼˜å…ˆçº§ (é«˜ â†’ ä½):
  é¡¹ç›®çº§: <project>/.testpilot/skills/     â† ç”¨æˆ·è‡ªå®šä¹‰, æœ€é«˜ä¼˜å…ˆ
  ç”¨æˆ·çº§: ~/.testpilot/skills/             â† ä¸ªäººåå¥½
  å†…ç½®:   testpilot/skills/                â† å‡ºå‚é»˜è®¤

åŒå Skill é«˜ä¼˜å…ˆçº§è¦†ç›–ä½ä¼˜å…ˆçº§
```

### 7.4 Skill åŠ è½½ç­–ç•¥

```
Agent å¯åŠ¨æ—¶:
1. åŠ è½½é€šç”¨ testing Skill (å§‹ç»ˆåŠ è½½)
2. Explore é˜¶æ®µæ£€æµ‹åˆ°æŠ€æœ¯æ ˆå, åŠ¨æ€åŠ è½½å¯¹åº” Skill
   æ£€æµ‹åˆ° Python â†’ åŠ è½½ testing-python
   æ£€æµ‹åˆ° Java   â†’ åŠ è½½ testing-java
   æ£€æµ‹åˆ° Node   â†’ åŠ è½½ testing-node
3. å¦‚æœé¡¹ç›®æœ‰ .testpilot/skills/, åŠ è½½å¹¶è¦†ç›–
```

### 7.5 å†…ç½® Skill è§„åˆ’

```
skills/
â”œâ”€â”€ testing/              # é€šç”¨æµ‹è¯•çŸ¥è¯† (å§‹ç»ˆåŠ è½½)
â”‚   â””â”€â”€ SKILL.md
â”œâ”€â”€ testing-python/       # Python + pytest
â”‚   â””â”€â”€ SKILL.md
â”œâ”€â”€ testing-java/         # Java + JUnit5 + Mockito
â”‚   â””â”€â”€ SKILL.md
â”œâ”€â”€ testing-node/         # Node + Jest
â”‚   â””â”€â”€ SKILL.md
â”œâ”€â”€ testing-go/           # Go + testing
â”‚   â””â”€â”€ SKILL.md
â””â”€â”€ testing-api/          # API/HTTP æ¥å£æµ‹è¯•
    â””â”€â”€ SKILL.md
```

---

## å…«ã€Prompt è®¾è®¡

### 8.1 Prompt åˆ†å±‚ç»“æ„

```
System Prompt = AGENTS.md + SOUL.md + åŠ¨æ€åŠ è½½çš„ SKILL.md

AGENTS.md â€” Agent è¡Œä¸ºè§„èŒƒ:
  - ä½ æ˜¯ TestPilot, ä¸€ä¸ªæµ‹è¯•ä¸“å®¶ Agent
  - ä½ æœ‰ 5 ä¸ªå·¥å…·å¯ç”¨
  - ä½ çš„å·¥ä½œæµç¨‹çº¦æŸ (å…ˆ explore å†ç”Ÿæˆ)
  - å®‰å…¨çº¦æŸ (ä¸åˆ é™¤ç”¨æˆ·ä»£ç , æµ‹è¯•æ–‡ä»¶å‘½åè§„èŒƒ)
  - è¾“å‡ºæ ¼å¼ (æŠ¥å‘Šæ¨¡æ¿)

SOUL.md â€” è§’è‰²äººæ ¼:
  - ç®€æ´ã€ä¸“ä¸šã€ç›´æ¥
  - å…³æ³¨æµ‹è¯•è´¨é‡è€Œéæ•°é‡
  - å‘ç°æºç  bug æ—¶æ˜ç¡®æŒ‡å‡ºä½ç½®å’ŒåŸå› 

SKILL.md â€” é¢†åŸŸçŸ¥è¯† (æŒ‰æŠ€æœ¯æ ˆåŠ¨æ€åŠ è½½)
```

### 8.2 System Prompt æ ¸å¿ƒå†…å®¹ (AGENTS.md)

```markdown
# TestPilot Agent

ä½ æ˜¯ TestPilot, ä¸€ä¸ªä¸“ç²¾äºè½¯ä»¶æµ‹è¯•çš„ AI Agentã€‚

## å·¥ä½œæ¨¡å¼
ç”¨æˆ·ä¼šæè¿°ä¸€ä¸ªè¦æµ‹è¯•çš„åŠŸèƒ½ã€‚ä½ è‡ªä¸»å®Œæˆå…¨æµç¨‹, ä¸éœ€è¦åå¤ç¡®è®¤ã€‚

## å·¥ä½œæµç¨‹çº¦æŸ
- åœ¨ç”Ÿæˆæµ‹è¯•ä¹‹å‰, å¿…é¡»å…ˆ read_file çœ‹è¿‡æºç 
- ä¼˜å…ˆä½¿ç”¨é¡¹ç›®å·²æœ‰çš„æµ‹è¯•æ•°æ®/fixture
- ä¸€æ¬¡æ‰¹é‡ç”Ÿæˆ 5-8 ä¸ªæµ‹è¯•å‡½æ•°
- æµ‹è¯•æ‰§è¡Œå¤±è´¥æ—¶, å…ˆåˆ¤æ–­æ˜¯æµ‹è¯•ä»£ç é—®é¢˜è¿˜æ˜¯æºç  bug
  - æµ‹è¯•ä»£ç é—®é¢˜: ä¿®å¤åé‡è¯• (æœ€å¤š 3 æ¬¡)
  - æºç  bug: åœ¨æŠ¥å‘Šä¸­æŒ‡å‡ºå…·ä½“ä½ç½®å’ŒåŸå› 
- ä¸è¦ä¿®æ”¹ç”¨æˆ·çš„æºç , åªåˆ›å»ºæµ‹è¯•æ–‡ä»¶

## Feature Doc
- é¦–æ¬¡æµ‹è¯•æŸåŠŸèƒ½æ—¶, åœ¨ .testpilot/features/ ç”ŸæˆåŠŸèƒ½æ–‡æ¡£
- åç»­æµ‹è¯•åŒä¸€åŠŸèƒ½æ—¶, å…ˆè¯»å–å·²æœ‰æ–‡æ¡£, èŠ‚çœæ¢ç´¢æ—¶é—´
- æ¯æ¬¡æµ‹è¯•å®Œæˆåæ›´æ–°æ–‡æ¡£çš„æµ‹è¯•å†å²éƒ¨åˆ†

## æµ‹è¯•è´¨é‡è¦æ±‚
- æ¯ä¸ªæµ‹è¯•å‡½æ•°å¿…é¡»æœ‰æ˜ç¡®çš„æ–­è¨€
- ä¸å…è®¸ assert True / assert 1==1 è¿™ç§æ— æ„ä¹‰æ–­è¨€
- ä¸å…è®¸ time.sleep åšåŒæ­¥
- Mock ç²’åº¦: åª mock å¤–éƒ¨è¾¹ç•Œ (IO), ä¸ mock è¢«æµ‹é€»è¾‘

## æµ‹è¯•æ–‡ä»¶è§„èŒƒ
- æ–‡ä»¶å: test_<åŠŸèƒ½å>.py (Python) / <åŠŸèƒ½å>.test.ts (Node)
- æ”¾åœ¨é¡¹ç›®çš„ tests/ ç›®å½•ä¸‹ (å¦‚æœå­˜åœ¨), å¦åˆ™æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•

## æŠ¥å‘Šæ ¼å¼
(è§ç¬¬ä¸‰èŠ‚ä¸­çš„æŠ¥å‘Šæ¨¡æ¿)
```

---

## ä¹ã€è¡Œä¸šå€Ÿé‰´

### 9.1 ç«å“åˆ†æ

#### Keploy (å¼€æº, eBPF æµé‡å½•åˆ¶)

- æ ¸å¿ƒ: ç”¨ eBPF åœ¨ç½‘ç»œå±‚å½•åˆ¶çœŸå® API è°ƒç”¨, å›æ”¾ä¸ºæµ‹è¯•
- ä¼˜åŠ¿: æµ‹è¯•æ•°æ®æ¥è‡ªçœŸå®æµé‡, ä¸æ˜¯ LLM ç¼–é€ 
- å±€é™: éœ€è¦åº”ç”¨åœ¨è¿è¡Œä¸­æ‰èƒ½å½•åˆ¶, ä¸èƒ½ä»ä»£ç é™æ€ç”Ÿæˆ

**å€Ÿé‰´ç‚¹ â†’ TestPilot:**
ä¸åš eBPF, ä½†åœ¨ SKILL.md ä¸­æŒ‡å¯¼ Agent ä¼˜å…ˆä½¿ç”¨é¡¹ç›®å·²æœ‰çš„ fixture/seed æ•°æ®, é¿å… LLM å‡­ç©ºç¼–é€ æµ‹è¯•æ•°æ®ã€‚

#### Qodo Cover (å¼€æº, Meta TestGen-LLM å®ç°)

- æ ¸å¿ƒ: æ‰¹é‡ç”Ÿæˆ â†’ æ‰§è¡Œ â†’ è¿‡æ»¤ (åªä¿ç•™èƒ½è·‘é€šä¸”æå‡è¦†ç›–ç‡çš„æµ‹è¯•)
- ä¼˜åŠ¿: è¿­ä»£è¿‡æ»¤ç®¡çº¿, æµ‹è¯•è´¨é‡æœ‰ä¿éšœ
- å±€é™: éœ€è¦å·²æœ‰è¦†ç›–ç‡æŠ¥å‘Šä½œä¸ºè¾“å…¥, ä¸èƒ½ä»é›¶å¼€å§‹

**å€Ÿé‰´ç‚¹ â†’ TestPilot:**
é‡‡ç”¨æ‰¹é‡ç”Ÿæˆ + è¿‡æ»¤ç­–ç•¥ã€‚åœ¨ SKILL.md ä¸­æŒ‡å¯¼ Agent ä¸€æ¬¡ç”Ÿæˆå¤šä¸ªæµ‹è¯•, æ‰§è¡Œåæ ¹æ®ç»“æœè¿‡æ»¤, è€Œéé€ä¸ªç”Ÿæˆã€‚è¦†ç›–ç‡é©±åŠ¨çš„è¡¥å……æµ‹è¯•å¾ªç¯ã€‚

#### Tusk (YC W24, CI/CD é›†æˆ)

- æ ¸å¿ƒ: PR è§¦å‘, åˆ†æ diff, ç”Ÿæˆæµ‹è¯•, æ²™ç®±æ‰§è¡Œ, è‡ªè¿­ä»£ä¿®å¤
- ä¼˜åŠ¿: Mixture-of-Models (ä¸åŒæ­¥éª¤ç”¨ä¸åŒ LLM), æ·±åº¦ CI/CD é›†æˆ
- å±€é™: ç»‘å®š GitHub CI/CD, ä¸èƒ½ç‹¬ç«‹è¿è¡Œ

**å€Ÿé‰´ç‚¹ â†’ TestPilot:**
LLM è°ƒç”¨æŠ½è±¡ä¸ºæ¥å£, æ¶æ„ä¸Šæ”¯æŒæœªæ¥ Mixture-of-Modelsã€‚æµ‹è¯•æ‰§è¡Œå¤±è´¥åçš„è‡ªè¿­ä»£ä¿®å¤æœºåˆ¶ã€‚

#### OpenClaw (å¼€æº, 150k+ stars)

- æ ¸å¿ƒ: é€šç”¨ä¸ªäºº AI åŠ©æ‰‹, Tool + Skill åˆ†ç¦»æ¶æ„
- ä¼˜åŠ¿: Skill ç³»ç»Ÿæåº¦çµæ´», ç¤¾åŒºç”Ÿæ€åºå¤§ (5700+ skills)
- å±€é™: é€šç”¨å‹, åœ¨æµ‹è¯•é¢†åŸŸæ²¡æœ‰æ·±åº¦

**å€Ÿé‰´ç‚¹ â†’ TestPilot:**
Tool/Skill åˆ†ç¦»æ¶æ„ã€‚SKILL.md æ ¼å¼ã€‚Workspace æ¦‚å¿µ (.testpilot/ ç›®å½•)ã€‚Skill çš„å‘ç°å’ŒåŠ è½½æœºåˆ¶ã€‚

### 9.2 å€Ÿé‰´æ±‡æ€»

| å€Ÿé‰´æ¥æº | å€Ÿé‰´å†…å®¹ | TestPilot å®ç°æ–¹å¼ |
|----------|----------|-------------------|
| Keploy | çœŸå®æ•°æ® > ç¼–é€ æ•°æ® | SKILL.md æŒ‡ä»¤: ä¼˜å…ˆç”¨é¡¹ç›® fixture |
| Qodo | æ‰¹é‡ç”Ÿæˆ + è¿‡æ»¤ç®¡çº¿ | SKILL.md æŒ‡ä»¤: ä¸€æ¬¡ç”Ÿæˆå¤šä¸ª, è¿‡æ»¤ |
| Qodo | è¦†ç›–ç‡é©±åŠ¨å¾ªç¯ | SKILL.md æŒ‡ä»¤: å¸¦ --cov æ‰§è¡Œ |
| Tusk | Mixture-of-Models | LLM æ¥å£æŠ½è±¡, æœªæ¥æ”¯æŒ |
| Tusk | è‡ªè¿­ä»£ä¿®å¤ | SKILL.md æŒ‡ä»¤: å¤±è´¥æœ€å¤šé‡è¯•3æ¬¡ |
| OpenClaw | Tool/Skill åˆ†ç¦» | æ ¸å¿ƒæ¶æ„è®¾è®¡ |
| OpenClaw | SKILL.md æ ¼å¼ | ç›´æ¥é‡‡ç”¨ |
| OpenClaw | Workspace æ¦‚å¿µ | .testpilot/ ç›®å½• |

---

## åã€MVP (ç¬¬ä¸€å±‚) å®ç°è®¡åˆ’

> **çŠ¶æ€: å·²è¶…è¶Š MVPã€‚** å½“å‰ç‰ˆæœ¬å·²åŒ…å« Web UIã€å¤š LLMã€ask_user äº¤äº’ç­‰åŸè®¡åˆ’"åç»­è¿­ä»£"çš„åŠŸèƒ½ã€‚

### 10.1 èŒƒå›´

```
å·²å®ç°:
  - è¯­è¨€: Python + pytest
  - 6 ä¸ªå·¥å…· (list_dir, read_file, write_file, search_files, run_command, ask_user)
  - 1 ä¸ªå†…ç½® Skill (testing-python)
  - Feature Doc ç”Ÿæˆ
  - CLI + Web åŒæ¨¡å¼
  - SSE å®æ—¶è¿›åº¦æµ
  - ask_user äº¤äº’ï¼ˆCLI + Webï¼‰
  - å¤š LLM æ”¯æŒï¼ˆAnthropic / OpenAI / DeepSeek / LiteLLMï¼‰
  - ç»“æ„åŒ–æŠ¥å‘Šæ¨¡æ¿ + è¯æ®æ ‡å‡†
  - å®‰å…¨åŠ å›ºï¼ˆå‘½ä»¤ç™½åå•ã€è·¯å¾„æ ¡éªŒï¼‰
  - GitHub Actions CI

åç»­è¿­ä»£:
  - å¤šè¯­è¨€ Skill
  - Docker æ²™ç®±
  - Mixture-of-Models
  - é•¿æœŸè®°å¿† (è·¨åŠŸèƒ½)
  - ç¤¾åŒº Skill å¸‚åœº
```

### 10.2 æ–‡ä»¶ç»“æ„

```
testpilot/
â”œâ”€â”€ agent.py              # Agent Loop (~80 è¡Œ)
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ registry.py       # Tool æ³¨å†Œè¡¨ (~40 è¡Œ)
â”‚   â”œâ”€â”€ file.py           # list_dir, read_file, write_file (~60 è¡Œ)
â”‚   â”œâ”€â”€ search.py         # search_files (~30 è¡Œ)
â”‚   â””â”€â”€ exec.py           # run_command (~30 è¡Œ)
â”œâ”€â”€ skills/
â”‚   â”œâ”€â”€ loader.py         # Skill åŠ è½½å™¨ (~50 è¡Œ)
â”‚   â””â”€â”€ testing-python/
â”‚       â””â”€â”€ SKILL.md      # Python æµ‹è¯•æŠ€èƒ½
â”œâ”€â”€ prompts/
â”‚   â”œâ”€â”€ AGENTS.md         # Agent è¡Œä¸ºå®šä¹‰
â”‚   â””â”€â”€ SOUL.md           # è§’è‰²äººæ ¼
â”œâ”€â”€ llm.py                # LLM å®¢æˆ·ç«¯å°è£… (~40 è¡Œ)
â””â”€â”€ cli.py                # CLI å…¥å£ (~20 è¡Œ)

æ€»è®¡: ~350 è¡Œ Python + 2 ä¸ª Markdown æ–‡ä»¶
```

### 10.3 è¿è¡Œç¤ºä¾‹

```bash
# é¦–æ¬¡è¿è¡Œ
$ testpilot "å¸®æˆ‘æµ‹è¯•ç™»å½•æ˜¯å¦æ­£å¸¸" -p ./my-project

ğŸš€ TestPilot å¯åŠ¨
ğŸ“ é¡¹ç›®: ./my-project
ğŸ“ ä»»åŠ¡: æµ‹è¯•ç™»å½•æ˜¯å¦æ­£å¸¸
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[explore]  æ‰«æé¡¹ç›®ç»“æ„...
[explore]  æ£€æµ‹åˆ° Python + FastAPI é¡¹ç›®
[explore]  æœç´¢ "ç™»å½•/login" ç›¸å…³ä»£ç ...
[explore]  å®šä½åˆ° 3 ä¸ªç›¸å…³æ–‡ä»¶
[feature]  ç”ŸæˆåŠŸèƒ½æ–‡æ¡£: .testpilot/features/login.md
[read]     é˜…è¯» src/auth/router.py ...
[read]     é˜…è¯» src/auth/service.py ...
[read]     å‘ç°æµ‹è¯•æ•°æ®: tests/fixtures/users.json
[generate] ç”Ÿæˆ 6 ä¸ªæµ‹è¯•ç”¨ä¾‹...
[execute]  pytest tests/test_login.py -v --cov=src/auth
[filter]   6 ä¸ªæµ‹è¯•: 5 é€šè¿‡, 1 å¤±è´¥
[analyze]  test_login_db_error: æ–­è¨€å¤±è´¥ â†’ æºç ç¼ºå°‘å¼‚å¸¸å¤„ç†
[report]   ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š æµ‹è¯•æŠ¥å‘Š: ç”¨æˆ·ç™»å½•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… é€šè¿‡: 5/6
âŒ å¤±è´¥: 1/6

âœ… test_login_success â€” æ­£ç¡®å¯†ç ç™»å½•æˆåŠŸ
âœ… test_login_wrong_password â€” é”™è¯¯å¯†ç è¿”å›401
âœ… test_login_user_not_found â€” ç”¨æˆ·ä¸å­˜åœ¨è¿”å›404
âœ… test_login_empty_input â€” ç©ºè¾“å…¥è¿”å›422
âœ… test_login_token_format â€” è¿”å›çš„JWTæ ¼å¼æ­£ç¡®
âŒ test_login_db_error â€” æ•°æ®åº“å¼‚å¸¸æœªå¤„ç†
   åŸå› : src/auth/service.py:45 login() æœªæ•è· SQLAlchemy å¼‚å¸¸
   å»ºè®®: æ·»åŠ  try/except å¤„ç†æ•°æ®åº“è¿æ¥å¤±è´¥çš„æƒ…å†µ

è¦†ç›–ç‡: src/auth/service.py 87% | src/auth/router.py 92%
```

```bash
# ç¬¬äºŒæ¬¡è¿è¡Œ (å¤ç”¨ Feature Doc)
$ testpilot "å¸®æˆ‘æµ‹è¯•ç™»å½•æ˜¯å¦æ­£å¸¸" -p ./my-project

ğŸš€ TestPilot å¯åŠ¨
ğŸ“ é¡¹ç›®: ./my-project
ğŸ“ ä»»åŠ¡: æµ‹è¯•ç™»å½•æ˜¯å¦æ­£å¸¸
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[feature]  æ‰¾åˆ°å·²æœ‰æ–‡æ¡£: .testpilot/features/login.md
[read]     é˜…è¯»æºç  (3 ä¸ªæ–‡ä»¶)...
[generate] ç”Ÿæˆ 6 ä¸ªæµ‹è¯•ç”¨ä¾‹...
[execute]  pytest tests/test_login.py -v --cov=src/auth
...
```

---

## åä¸€ã€æ¼”è¿›è·¯çº¿

```
ç¬¬ä¸€å±‚ (MVP) âœ… å·²å®Œæˆ
â”œâ”€ Python + pytest
â”œâ”€ 6 ä¸ªå·¥å…· (å« ask_user)
â”œâ”€ Feature Doc
â”œâ”€ CLI + Web åŒæ¨¡å¼
â”œâ”€ SSE å®æ—¶è¿›åº¦æµ
â”œâ”€ ask_user äº¤äº’
â””â”€ å¤š LLM æ”¯æŒ

    â†“

ç¬¬äºŒå±‚ (è®¡åˆ’ä¸­)
â”œâ”€ å¤šè¯­è¨€ Skill (Java/Node/Go)
â”œâ”€ é¡¹ç›®çº§ Skill è‡ªå®šä¹‰
â”œâ”€ è¦†ç›–ç‡é©±åŠ¨å¾ªç¯
â”œâ”€ æµ‹è¯•å†å²å¯¹æ¯” (å›å½’æ£€æµ‹)
â”œâ”€ å˜æ›´æ„ŸçŸ¥ (git diff)
â””â”€ Feature Doc ç¼“å­˜ä¼˜åŒ–

    â†“

ç¬¬ä¸‰å±‚
â”œâ”€ Docker æ²™ç®±éš”ç¦»
â”œâ”€ Mixture-of-Models
â”œâ”€ é•¿æœŸè®°å¿† (è·¨åŠŸèƒ½çŸ¥è¯†å›¾è°±)
â”œâ”€ API/SDK æ¥å…¥æ–¹å¼
â””â”€ Skill ç¤¾åŒºå¸‚åœº

    â†“

ç¬¬å››å±‚
â”œâ”€ CI/CD é›†æˆ (GitHub Action)
â”œâ”€ å¤š Agent åä½œ (æµ‹è¯•Agent + ä¿®å¤Agent)
â”œâ”€ è‡ªåŠ¨ä¿®å¤æºç  bug (å¯é€‰)
â”œâ”€ æ€§èƒ½æµ‹è¯• / å®‰å…¨æµ‹è¯• Skill
â””â”€ MCP Server æ¨¡å¼
```

---

## é™„å½•

### A. å‚è€ƒèµ„æ–™

- [OpenClaw](https://github.com/openclaw/openclaw) â€” é€šç”¨ AI Agent, Tool/Skill æ¶æ„å‚è€ƒ
- [Keploy](https://keploy.io/) â€” eBPF æµé‡å½•åˆ¶æµ‹è¯•, çœŸå®æ•°æ®ç†å¿µ
- [Qodo Cover](https://github.com/qodo-ai/qodo-cover) â€” Meta TestGen-LLM å¼€æºå®ç°, è¿­ä»£è¿‡æ»¤ç®¡çº¿
- [Tusk](https://www.usetusk.ai/) â€” CI/CD æµ‹è¯• Agent, Mixture-of-Models
- [testRigor](https://testrigor.com/) â€” è‡ªç„¶è¯­è¨€ E2E æµ‹è¯•
- [Meta TestGen-LLM è®ºæ–‡](https://arxiv.org/abs/2402.09171) â€” è‡ªåŠ¨åŒ–æµ‹è¯•ç”Ÿæˆçš„å­¦æœ¯åŸºç¡€

### B. æœ¯è¯­è¡¨

| æœ¯è¯­ | å®šä¹‰ |
|------|------|
| Tool | å¯æ‰§è¡Œçš„å‡½æ•°, Agent é€šè¿‡ tool_use è°ƒç”¨, æä¾›èƒ½åŠ› |
| Skill | SKILL.md æ–‡ä»¶, æ³¨å…¥ prompt çš„é¢†åŸŸçŸ¥è¯†, æä¾›æ™ºèƒ½ |
| Feature Doc | Agent å¯¹é¡¹ç›®æŸåŠŸèƒ½çš„ç†è§£ç¼“å­˜, æŒä¹…åŒ–åœ¨ .testpilot/ |
| Agent Loop | while å¾ªç¯ + LLM tool_use, Agent çš„æ‰§è¡Œå¼•æ“ |
| è¿‡æ»¤ç®¡çº¿ | æ‰¹é‡ç”Ÿæˆæµ‹è¯•åé€ä¸ªéªŒè¯ã€åªä¿ç•™æœ‰æ•ˆæµ‹è¯•çš„æµç¨‹ |
